<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="MAD : Small and Fast Rebar Replacement">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>MAD</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/synrc/mad">View on GitHub</a>

          <h1 id="project_title">MAD</h1>
          <h2 id="project_tagline">Small and Fast Rebar Replacement</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/synrc/mad/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/synrc/mad/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="mad" class="anchor" href="#mad" aria-hidden="true"><span class="octicon octicon-link"></span></a>MAD</h1>

<p>A simple rebar-compatible dependency manager and developer tool with plugins.</p>

<p><img src="http://synrc.com/images/mad.png" alt="MAD"></p>

<h2>
<a id="goals" class="anchor" href="#goals" aria-hidden="true"><span class="octicon octicon-link"></span></a>Goals</h2>

<p>It shall:</p>

<ul>
<li>be compatible with rebar configuration.</li>
<li>be as small and fast as possible.</li>
</ul>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>Colorful REPL</li>
<li>Support rebar.config</li>
<li>Support OTP releases and directory structure</li>
<li>Fast deps resolving and cycles detecting</li>
<li>Fast compilation</li>
<li>DTL/YECC/LEEX/PORT/SCRIPT/APP/ERL compilation</li>
<li>BEAM bundles (single-file escriptized app)</li>
<li>LING bundles (single-file with built-in LING)</li>
<li>RELX release (relx dependency should be discarded)</li>
<li>Start/Stop/Attach</li>
<li>Static files generation with node.js tools</li>
<li>9p server for remote access</li>
</ul>

<h2>
<a id="build" class="anchor" href="#build" aria-hidden="true"><span class="octicon octicon-link"></span></a>Build</h2>

<div class="highlight highlight-sh"><pre>    $ make</pre></div>

<p>And put <code>mad</code> to PATH.</p>

<h2>
<a id="beam-lightweight-unikernel-bundle" class="anchor" href="#beam-lightweight-unikernel-bundle" aria-hidden="true"><span class="octicon octicon-link"></span></a>BEAM Lightweight Unikernel Bundle</h2>

<p>Bundle is a gzipped archive of erlang beams of all dependecies
along with directory structure of OTP-applications with priv directories.
This allows you to pack all site inside single portable escript package able
to run under Windows, Linux and Mac. Releases includes all current
directory exept sources both code and data with all dependencies. You may think of BEAM 
Lightweight Unikernel Bundle as of fixed Erlang releases.</p>

<div class="highlight highlight-sh"><pre>    $ mad app <span class="pl-s"><span class="pl-pds">"</span>sample<span class="pl-pds">"</span></span>
    $ <span class="pl-c1">cd</span> sample
    $ mad deps compile plan bundle <span class="pl-s"><span class="pl-pds">"</span>web_app<span class="pl-pds">"</span></span>
    $ ./web_app</pre></div>

<h2>
<a id="ling-unikernel" class="anchor" href="#ling-unikernel" aria-hidden="true"><span class="octicon octicon-link"></span></a>LING Unikernel</h2>

<p>Sample rebar.config for your application you want to go unikernel:</p>

<div class="highlight highlight-erlang"><pre>{<span class="pl-c1">deps_dir</span>,<span class="pl-s"><span class="pl-pds">"</span>deps<span class="pl-pds">"</span></span>}.
{<span class="pl-c1">deps</span>, [{<span class="pl-c1">ling</span>, <span class="pl-s"><span class="pl-pds">"</span>.*<span class="pl-pds">"</span></span>, {<span class="pl-c1">git</span>, <span class="pl-s"><span class="pl-pds">"</span>git://github.com/proger/ling<span class="pl-pds">"</span></span>, {<span class="pl-c1">tag</span>, <span class="pl-s"><span class="pl-pds">"</span>osx-again<span class="pl-pds">"</span></span>}}},
        {<span class="pl-c1">sh</span>, <span class="pl-s"><span class="pl-pds">"</span>.*<span class="pl-pds">"</span></span>,   {<span class="pl-c1">git</span>, <span class="pl-s"><span class="pl-pds">"</span>git://github.com/synrc/sh<span class="pl-pds">"</span></span>,       {<span class="pl-c1">tag</span>, <span class="pl-s"><span class="pl-pds">"</span>1.4<span class="pl-pds">"</span></span>}}}]}.</pre></div>

<p>Now you should build LING/posix:</p>

<div class="highlight highlight-sh"><pre>    $ ./mad dep
    $ <span class="pl-c1">cd</span> deps/ling
    $ ARCH=posix_x86 make</pre></div>

<p>Now pack vmling.o, your OTP apps and rest static to single-file LING bundle with VM inside.</p>

<div class="highlight highlight-sh"><pre>    $ ./mad lin
Ling Params: []
ARCH: posix_x86
Bundle Name: mad
System: [compiler,syntax_tools,sasl,tools,mnesia,reltool,xmerl,crypto,kernel,
         stdlib,wx,webtool,ssl,runtime_tools,public_key,observer,inets,asn1,
         et,eunit,hipe,os_mon]
Apps: [kernel,stdlib,sh,mad]
Overlay: [<span class="pl-s"><span class="pl-pds">"</span>crypto.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>9p.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>9p_auth.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>9p_info.beam<span class="pl-pds">"</span></span>,
          <span class="pl-s"><span class="pl-pds">"</span>9p_mounter.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>9p_server.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>9p_tcp.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>9p_zero.beam<span class="pl-pds">"</span></span>,
          <span class="pl-s"><span class="pl-pds">"</span>disk.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>disk_server.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>embedded_export.beam<span class="pl-pds">"</span></span>,
          <span class="pl-s"><span class="pl-pds">"</span>goo_export.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>goofs.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>hipe_unified_loader.beam<span class="pl-pds">"</span></span>,
          <span class="pl-s"><span class="pl-pds">"</span>inet_config.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>kernel.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>ling_bifs.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>ling_code.beam<span class="pl-pds">"</span></span>,
          <span class="pl-s"><span class="pl-pds">"</span>ling_disasm.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>ling_iops.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>ling_iopvars.beam<span class="pl-pds">"</span></span>,
          <span class="pl-s"><span class="pl-pds">"</span>ling_lib.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>net_vif.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>os.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>prim_file.beam<span class="pl-pds">"</span></span>,
          <span class="pl-s"><span class="pl-pds">"</span>user_drv.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>os_mon.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>dets.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>filename.beam<span class="pl-pds">"</span></span>,
          <span class="pl-s"><span class="pl-pds">"</span>maps.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>unicode.beam<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>zlib.beam<span class="pl-pds">"</span></span>]
Bucks: [{boot,<span class="pl-s"><span class="pl-pds">"</span>/boot<span class="pl-pds">"</span></span>,2},
        {os_mon,<span class="pl-s"><span class="pl-pds">"</span>/erlang/lib/os_mon/ebin<span class="pl-pds">"</span></span>,1},
        {crypto,<span class="pl-s"><span class="pl-pds">"</span>/erlang/lib/crypto/ebin<span class="pl-pds">"</span></span>,1},
        {kernel,<span class="pl-s"><span class="pl-pds">"</span>/erlang/lib/kernel/ebin<span class="pl-pds">"</span></span>,90},
        {stdlib,<span class="pl-s"><span class="pl-pds">"</span>/erlang/lib/stdlib/ebin<span class="pl-pds">"</span></span>,85},
        {sh,<span class="pl-s"><span class="pl-pds">"</span>/erlang/lib/sh/ebin<span class="pl-pds">"</span></span>,6},
        {mad,<span class="pl-s"><span class="pl-pds">"</span>/erlang/lib/mad/ebin<span class="pl-pds">"</span></span>,43}]
Initializing EMBED.FS:
Mount View:
 /boot /boot
/erlang/lib/os_mon/ebin /os_mon
/erlang/lib/crypto/ebin /crypto
/erlang/lib/kernel/ebin /kernel
/erlang/lib/stdlib/ebin /stdlib
/erlang/lib/sh/ebin /sh
/erlang/lib/mad/ebin /mad
Creating EMBED.FS C file: ...ok
Compilation of Filesystem object: ...ok
Linking Image: ok</pre></div>

<p>Run it:</p>

<div class="highlight highlight-sh"><pre>$ rlwrap ./image.img
Erlang [ling-0.3.2]

Eshell V6.3  (abort with ^G)
<span class="pl-k">1&gt;</span> <span class="pl-en">application:which_applications</span>().
[{mad,<span class="pl-s"><span class="pl-pds">"</span>MAD VXZ Build Tool<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2.2<span class="pl-pds">"</span></span>},
 {sh,<span class="pl-s"><span class="pl-pds">"</span>VXZ SH Executor<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>0.9<span class="pl-pds">"</span></span>},
 {stdlib,<span class="pl-s"><span class="pl-pds">"</span>ERTS  CXC 138 10<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2.2<span class="pl-pds">"</span></span>},
 {kernel,<span class="pl-s"><span class="pl-pds">"</span>ERTS  CXC 138 10<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3.0.3<span class="pl-pds">"</span></span>}]</pre></div>

<p>See details in <a href="http://maxim.livejournal.com/458016.html">http://maxim.livejournal.com/458016.html</a> </p>

<h2>
<a id="building-otp-release" class="anchor" href="#building-otp-release" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building OTP Release</h2>

<p>Releases are bundles made by release_handler module of sasl applications.
It has it own fat bootstripts along with erlang runtime included.
This allows you to distribute you applications with copy deploy
without Erlang prerequisite.</p>

<div class="highlight highlight-sh"><pre>    $ mad app sample
    $ <span class="pl-c1">cd</span> sample
    $ mad dep com pla release
    $ _rel/sample/bin/sample console</pre></div>

<p>Note: <a href="https://github.com/erlware/relx">relx</a> must be installed
LINUX NOTE: if you want to have online recompilation you should do at first:</p>

<div class="highlight highlight-sh"><pre>    $ sudo apt-get install inotify-tools</pre></div>

<h2>
<a id="support" class="anchor" href="#support" aria-hidden="true"><span class="octicon octicon-link"></span></a>Support</h2>

<ul>
<li><a href="https://gitter.im/5HT/n2o?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Gitter"></a></li>
<li>IRC Channel #n2o on FreeNode 24/7</li>
</ul>

<h2>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h2>

<p>If you are new or need to determine whether the MAD architecture and
philosophy is a fit for your project</p>

<ul>
<li>Official MAD brochure <a href="http://synrc.com/apps/mad/doc/book.pdf">PDF</a>
</li>
</ul>

<h2>
<a id="credits" class="anchor" href="#credits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Credits</h2>

<ul>
<li>Maxim Sokhatsky</li>
<li>Sina Samavati</li>
<li>Vladimir Kirillov</li>
</ul>

<p>OM A HUM</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">MAD maintained by <a href="https://github.com/synrc">synrc</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
